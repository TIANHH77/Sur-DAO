<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Earth Commons DAO ‚Äî Portal institucional</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root { --bg:#0f1115; --card:#171a21; --text:#e6e8ef; --muted:#aeb6c2; --accent:#5cc8ff; --line:#242835; }
    *{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto}
    header{padding:32px 20px;border-bottom:1px solid var(--line);position:sticky;top:0;background:var(--bg);z-index:10}
    header .title{font-weight:600;font-size:20px}
    nav a{margin-right:16px;color:var(--muted);text-decoration:none; font-size: 14px;}
    nav a:hover{color:var(--accent)}
    main{max-width:960px;margin:0 auto;padding:24px 20px}
    section{margin:28px 0;padding:20px;background:var(--card);border:1px solid var(--line);border-radius:10px}
    h2{margin:0 0 12px 0;font-size:20px; color: var(--accent);}
    h3{margin:18px 0 8px 0;font-size:16px;color:var(--muted)}
    p{line-height:1.6; color: var(--text)}
    ul{margin:10px 0 0 18px}
    li{margin-bottom: 8px;}
    a.doc{color:var(--accent);text-decoration:none}
    a.doc:hover{text-decoration:underline}
    .kpi-box { background: #1d2130; padding: 15px; border-radius: 8px; border-left: 4px solid var(--accent); }
    footer{color:var(--muted);padding:24px 20px;border-top:1px solid var(--line);text-align:center; font-size: 12px;}
    .tag{display:inline-block;padding:4px 8px;border:1px solid var(--line);border-radius:999px;color:var(--muted);font-size:12px; margin-right: 5px;}
    
    /* Estilos Calculadora */
    .calc-container { display: grid; gap: 15px; background: #11141b; padding: 20px; border-radius: 8px; margin-top: 15px; }
    input[type=number] { background: var(--bg); border: 1px solid var(--line); color: white; padding: 8px; border-radius: 4px; }
    button { background: var(--accent); color: #000; border: none; padding: 12px; font-weight: bold; border-radius: 5px; cursor: pointer; transition: 0.3s; }
    button:hover { opacity: 0.8; }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
  <script>mermaid.initialize({ startOnLoad:true, theme: 'dark' });</script>
</head>
<body>
  <header>
    <div class="title">Earth Commons DAO ‚Äî Sur DAO</div>
    <nav>
      <a href="#descripcion">Descripci√≥n</a>
      <a href="#kpis">Dashboard SIES</a>
      <a href="#calculadora">Calculadora Valor</a>
      <a href="#diagrama">Gobernanza</a>
    </nav>
  </header>

  <main>
    <section id="descripcion">
      <h2>Descripci√≥n</h2>
      <p>
        Este portal documenta la <strong>Capa de Sombra</strong>: los flujos de capital humano, saberes y reciprocidad que el sistema institucional ignora. 
        Transformamos la deserci√≥n en trayectorias acompa√±adas mediante tecnolog√≠a DAO.
      </p>
      <span class="tag">Institucional</span><span class="tag">Gobernanza Descentralizada</span><span class="tag">Justicia de Datos</span>
    </section>

    <section id="kpis">
      <h2>üìä Dashboard: Datos de la Sombra (SIES 2025)</h2>
      <p>Indicadores reales extra√≠dos del Servicio de Informaci√≥n de Educaci√≥n Superior para la USACH.</p>
      <div class="kpi-box">
        <ul id="lista-kpis" style="list-style: none; padding: 0;">
          <li>Cargando m√©tricas de la sombra...</li>
        </ul>
      </div>
    </section>

    <section id="calculadora">
      <h2>‚öñÔ∏è Calculadora de Capital Humano</h2>
      <p>El sistema te cobra una deuda; nosotros medimos tu valor real generado por saberes y tiempo invertido.</p>
      <div class="calc-container">
        <label>A√±os en educaci√≥n tradicional: <input type="number" id="anos-trad" value="4"></label>
        <label>Saberes aut√≥nomos (Nivel 1-10): <input type="range" id="saberes" min="1" max="10" value="7"></label>
        <button onclick="calcularValor()">DEVELAR MI VALOR</button>
        <div id="resultado-valor" style="margin-top:10px; font-size: 1.1em;"></div>
      </div>
    </section>

    <section id="diagrama">
      <h2>Diagrama de Flujo: Espiral DAO</h2>
      <div class="mermaid">
        graph TD
            A[Deserci√≥n / Sombra] -->|Visibilizaci√≥n| B(Sur DAO)
            B -->|Match de Saberes| C[Convalidaci√≥n Autom√°tica]
            B -->|Tokenizaci√≥n| D[Capital Humano Recuperado]
            C --> E[Salida de Babel]
            D --> E
      </div>
    </section>

    <section id="manifiestos">
      <h2>Documentaci√≥n Maestra</h2>
      <ul>
        <li><a class="doc" href="manifiestos/Manifiesto-Parte-2.md">Trayectorias acompa√±adas (MD)</a></li>
        <li><a class="doc" href="manifiestos/Roadmap-Tecnico.md">Roadmap de la Espiral (MD)</a></li>
      </ul>
    </section>
  </main>

  <footer>
    <p>¬© Earth Commons DAO ‚Äî Prototipo 2026. Basado en datos reales del SIES.</p>
  </footer>

  <script>
    // 1. CARGA DE DATOS DESDE EL JSON
    fetch('./data_sur.json')
      .then(res => res.json())
      .then(data => {
        document.getElementById('lista-kpis').innerHTML = `
          <li>Instituci√≥n: <strong>${data.institucion}</strong></li>
          <li>Tasa Deserci√≥n 1er A√±o: <strong style="color:#ff5c5c">${data.metricas.desercion_primer_ano}%</strong></li>
          <li>Capital Social en Riesgo: <strong>${data.metricas.capital_social_riesgo}</strong></li>
          <li>Nodos en Sombra: <strong>${data.metricas.estudiantes_en_sombra}</strong></li>
        `;
      })
      .catch(e => {
        document.getElementById('lista-kpis').innerHTML = "<li>Error: Sube el archivo 'data_sur.json' a tu repo.</li>";
      });

    // 2. L√ìGICA DE LA CALCULADORA
    function calcularValor() {
      const anos = document.getElementById('anos-trad').value;
      const saberes = document.getElementById('saberes').value;
      
      // Valorizaci√≥n simb√≥lica: $4.5M por a√±o de vida + $1.5M por nivel de saber
      const valorTotal = (anos * 4500000) + (saberes * 1500000);
      const deudaFiccion = 2500000;
      const excedente = valorTotal - deudaFiccion;

      document.getElementById('resultado-valor').innerHTML = `
        Tu Capital de Saberes: <span style="color:var(--accent)">$${valorTotal.toLocaleString()} CLP</span><br>
        <small>Despu√©s de cubrir tu deuda, le aportas al mundo un excedente de $${excedente.toLocaleString()}.</small>
      `;
    }
  </script>
</body>
</html>
